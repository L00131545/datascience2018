crime_file_location <- paste0(getwd(), '/input/crimefile/')
postcode_file_location <- paste0(getwd(), '/input/CleanNIPostcodeData.csv')
write_file_location <- paste0(getwd(), '/output/')
csv_file_list <- list.files(path = crime_file_location, pattern = "*.csv", recursive = TRUE, full.names = TRUE)
combine_results <- function(csv_file_list) {     crime_data <- NULL     for (csv_file in csv_file_list) {         temp <- read.csv(header = TRUE, stringsAsFactors = FALSE, csv_file)         crime_data <- rbind(temp, crime_data)     }     return(crime_data) }
crime_data <- combine_results(csv_file_list)
nrow(crime_data)
nrow(crime_data)
head(crime_data)
str(crime_data)
write.csv(crime_data, paste0(write_file_location, '/AllNICrimeData.csv'), row.names = FALSE)
crime_data$Crime.ID <- NULL
crime_data$Falls.within <- NULL
crime_data$Reported.by <- NULL
crime_data$LSOA.code <- NULL
crime_data$LSOA.name <- NULL
crime_data$Last.outcome.category <- NULL
crime_data$Context <- NULL
head(crime_data)
str(crime_data)
crime_data$Crime.type = factor(crime_data$Crime.type, levels = levels(factor(crime_data$Crime.type)), ordered = FALSE)
head(crime_data)
str(crime_data)
crime_data$Location <- gsub("On or near ", "", crime_data$Location)
head(crime_data)
str(crime_data)
cleaned_post_codes <- read.csv(postcode_file_location, header = TRUE)[, c("Primary_Thorfare", "Postcode", "Town", "County")]
merged_data <- merge(x = crime_data, y = unique_post_code[, c("Town", "County", "Postcode")], by = "Postcode", all.x = TRUE)
unique_post_code <- cleaned_post_codes[!duplicated(cleaned_post_codes$Postcode),]
########################################## h ##########################
merged_data <- merge(x = crime_data, y = unique_post_code[, c("Town", "County", "Postcode")], by = "Postcode", all.x = TRUE)
str(crime_data)
str(unique_post_code)
merged_data <- merge(x = crime_data, y = unique_post_code[, c("Town", "County", "Postcode")], all.x = TRUE)
merged_data <- unique_post_code[, c("Town", "County", "Postcode")]
str(merged_data)
########################################## i ##########################
write.csv(merged_data, paste0(write_file_location, '/FinalNICrimeData.csv'), row.names = FALSE)
########################################## j ##########################
filter_by_location_strabane <- merged_data[grep("Strabane", merged_data$Town, ignore.case = TRUE),]
strabane_Data <- filter_by_location_strabane[grep("BT82", filter_by_location_strabane$Postcode, ignore.case = TRUE),]
head(strabane_Data, 10)
combine_results <- function(csv_file_list) {     crimedetail <- NULL     for (csv_file in csv_file_list) {         temp <- read.csv(header = TRUE, stringsAsFactors = FALSE, csv_file)         crimedetail <- rbind(temp, crimedetail)     }     return(crimedetail) }
crimedetail <- combine_results(csv_file_list)
nrow(crimedetail)
head(crimedetail)
str(crimedetail)
write.csv(crimedetail, paste0(write_file_location, '/AllNICrimeData.csv'), row.names = FALSE)
###################################################
